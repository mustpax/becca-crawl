var users = ["http://new-york.flywheelsports.com/class/72526",
            "http://new-york.flywheelsports.com/class/72527",
            "http://new-york.flywheelsports.com/class/72528",
            "http://new-york.flywheelsports.com/class/72529",
            "http://new-york.flywheelsports.com/class/72530",
            "http://new-york.flywheelsports.com/class/72531",
            "http://new-york.flywheelsports.com/class/72532",
            "http://new-york.flywheelsports.com/class/72533",
            "http://new-york.flywheelsports.com/class/72534",
            "http://new-york.flywheelsports.com/class/72535",
            "http://new-york.flywheelsports.com/class/72536",
            "http://new-york.flywheelsports.com/class/72537",
            "http://new-york.flywheelsports.com/class/72538",
            "http://new-york.flywheelsports.com/class/72539",
            "http://new-york.flywheelsports.com/class/72540",
            "http://new-york.flywheelsports.com/class/72541",
            "http://new-york.flywheelsports.com/class/72542",
            "http://new-york.flywheelsports.com/class/72543",
            "http://new-york.flywheelsports.com/class/72544",
            "http://new-york.flywheelsports.com/class/72545",
            "http://new-york.flywheelsports.com/class/72546",
            "http://new-york.flywheelsports.com/class/72547",
            "http://new-york.flywheelsports.com/class/72548",
            "http://new-york.flywheelsports.com/class/72549",
            "http://new-york.flywheelsports.com/class/72550",
            "http://new-york.flywheelsports.com/class/72551",
            "http://new-york.flywheelsports.com/class/72552",
            "http://new-york.flywheelsports.com/class/72553",
            "http://new-york.flywheelsports.com/class/72554",
            "http://new-york.flywheelsports.com/class/72555",
            "http://new-york.flywheelsports.com/class/72556",
            "http://new-york.flywheelsports.com/class/72557",
            "http://new-york.flywheelsports.com/class/72558",
            "http://new-york.flywheelsports.com/class/72559",
            "http://new-york.flywheelsports.com/class/72560",
            "http://new-york.flywheelsports.com/class/72561",
            "http://new-york.flywheelsports.com/class/72562",
            "http://new-york.flywheelsports.com/class/72563",
            "http://new-york.flywheelsports.com/class/72564",
            "http://new-york.flywheelsports.com/class/72565",
            "http://new-york.flywheelsports.com/class/72566",
            "http://new-york.flywheelsports.com/class/72567",
            "http://new-york.flywheelsports.com/class/72568",
            "http://new-york.flywheelsports.com/class/72569",
            "http://new-york.flywheelsports.com/class/72570",
            "http://new-york.flywheelsports.com/class/72571",
            "http://new-york.flywheelsports.com/class/72572",
            "http://new-york.flywheelsports.com/class/72573",
            "http://new-york.flywheelsports.com/class/72574",
            "http://new-york.flywheelsports.com/class/72575",
            "http://new-york.flywheelsports.com/class/72576",
            "http://new-york.flywheelsports.com/class/72577",
            "http://new-york.flywheelsports.com/class/72578",
            "http://new-york.flywheelsports.com/class/72579",
            "http://new-york.flywheelsports.com/class/72580",
            "http://new-york.flywheelsports.com/class/72581",
            "http://new-york.flywheelsports.com/class/72582",
            "http://new-york.flywheelsports.com/class/72583",
            "http://new-york.flywheelsports.com/class/72584",
            "http://new-york.flywheelsports.com/class/72585",
            "http://new-york.flywheelsports.com/class/72586",
            "http://new-york.flywheelsports.com/class/72587",
            "http://new-york.flywheelsports.com/class/72588",
            "http://new-york.flywheelsports.com/class/72589",
            "http://new-york.flywheelsports.com/class/72590",
            "http://new-york.flywheelsports.com/class/72591",
            "http://new-york.flywheelsports.com/class/72592",
            "http://new-york.flywheelsports.com/class/72593",
            "http://new-york.flywheelsports.com/class/72594",
            "http://new-york.flywheelsports.com/class/72595",
            "http://new-york.flywheelsports.com/class/72596",
            "http://new-york.flywheelsports.com/class/72597",
            "http://new-york.flywheelsports.com/class/72598",
            "http://new-york.flywheelsports.com/class/72599",
            "http://new-york.flywheelsports.com/class/72600",
            "http://new-york.flywheelsports.com/class/72601",
            "http://new-york.flywheelsports.com/class/72602",
            "http://florida.flywheelsports.com/class/29458",
            "http://florida.flywheelsports.com/class/29459",
            "http://florida.flywheelsports.com/class/29460",
            "http://florida.flywheelsports.com/class/29461",
            "http://florida.flywheelsports.com/class/29462",
            "http://florida.flywheelsports.com/class/29463",
            "http://florida.flywheelsports.com/class/29464",
            "http://florida.flywheelsports.com/class/29465",
            "http://florida.flywheelsports.com/class/29466",
            "http://florida.flywheelsports.com/class/29467",
            "http://florida.flywheelsports.com/class/29468",
            "http://florida.flywheelsports.com/class/29469",
            "http://florida.flywheelsports.com/class/29470",
            "http://florida.flywheelsports.com/class/29471",
            "http://florida.flywheelsports.com/class/29472",
            "http://florida.flywheelsports.com/class/29473",
            "http://florida.flywheelsports.com/class/29474",
            "http://florida.flywheelsports.com/class/29475",
            "http://florida.flywheelsports.com/class/29476",
            "http://florida.flywheelsports.com/class/29477",
            "http://florida.flywheelsports.com/class/29478",
            "http://florida.flywheelsports.com/class/29479",
            "http://florida.flywheelsports.com/class/29481",
            "http://florida.flywheelsports.com/class/29482",
            "http://florida.flywheelsports.com/class/29483",
            "http://florida.flywheelsports.com/class/29484",
            "http://florida.flywheelsports.com/class/29485",
            "http://florida.flywheelsports.com/class/29486",
            "http://florida.flywheelsports.com/class/29487",
            "http://florida.flywheelsports.com/class/29488",
            "http://florida.flywheelsports.com/class/29489",
            "http://florida.flywheelsports.com/class/29722",
            "http://florida.flywheelsports.com/class/29723",
            "http://florida.flywheelsports.com/class/29724",
            "http://florida.flywheelsports.com/class/29725",
            "http://florida.flywheelsports.com/class/29726",
            "http://florida.flywheelsports.com/class/29490",
            "http://florida.flywheelsports.com/class/29491",
            "http://florida.flywheelsports.com/class/29492",
            "http://florida.flywheelsports.com/class/29493",
            "http://florida.flywheelsports.com/class/29497",
            "http://florida.flywheelsports.com/class/29494",
            "http://florida.flywheelsports.com/class/29495",
            "http://florida.flywheelsports.com/class/29496",
            "http://florida.flywheelsports.com/class/29498",
            "http://florida.flywheelsports.com/class/29499",
            "http://florida.flywheelsports.com/class/29500",
            "http://florida.flywheelsports.com/class/29501",
            "http://florida.flywheelsports.com/class/29504",
            "http://florida.flywheelsports.com/class/29502",
            "http://florida.flywheelsports.com/class/29503",
            "http://florida.flywheelsports.com/class/29505",
            "http://florida.flywheelsports.com/class/29506",
            "http://florida.flywheelsports.com/class/29507",
            "http://florida.flywheelsports.com/class/29508",
            "http://florida.flywheelsports.com/class/29509",
            "http://florida.flywheelsports.com/class/29513",
            "http://florida.flywheelsports.com/class/29510",
            "http://florida.flywheelsports.com/class/29511",
            "http://florida.flywheelsports.com/class/29514",
            "http://florida.flywheelsports.com/class/29515",
            "http://florida.flywheelsports.com/class/29516",
            "http://florida.flywheelsports.com/class/29517",
            "http://florida.flywheelsports.com/class/29520",
            "http://florida.flywheelsports.com/class/29518",
            "http://florida.flywheelsports.com/class/29519",
            "http://florida.flywheelsports.com/class/29521",
            "http://florida.flywheelsports.com/class/29522",
            "http://florida.flywheelsports.com/class/29523",
            "http://florida.flywheelsports.com/class/29524",
            "http://florida.flywheelsports.com/class/29525",
            "http://florida.flywheelsports.com/class/29526",
            "http://florida.flywheelsports.com/class/29527",
            "http://florida.flywheelsports.com/class/29528",
            "http://florida.flywheelsports.com/class/29534",
            "http://florida.flywheelsports.com/class/29529",
            "http://florida.flywheelsports.com/class/29530",
            "http://florida.flywheelsports.com/class/29531",
            "http://florida.flywheelsports.com/class/29532",
            "http://florida.flywheelsports.com/class/29533",
            "http://florida.flywheelsports.com/class/29541",
            "http://florida.flywheelsports.com/class/29536",
            "http://florida.flywheelsports.com/class/29537",
            "http://florida.flywheelsports.com/class/29538",
            "http://florida.flywheelsports.com/class/29539",
            "http://florida.flywheelsports.com/class/29542",
            "http://florida.flywheelsports.com/class/29540",
            "http://florida.flywheelsports.com/class/29754",
            "http://florida.flywheelsports.com/class/29755",
            "http://florida.flywheelsports.com/class/29756",
            "http://florida.flywheelsports.com/class/29757",
            "http://florida.flywheelsports.com/class/29761",
            "http://florida.flywheelsports.com/class/29758",
            "http://florida.flywheelsports.com/class/29759",
            "http://florida.flywheelsports.com/class/29760"];

function follow(user, callback) {
    var page = require('webpage').create();
    page.open(user, function (status) {
        if (status === 'fail') {
            console.log(user + ': ?');
        } else {
            var count = page.evaluate(function () {
                return document.querySelectorAll('.reserved').length - 1;
            });

            var time = page.evaluate(function () {
                return document.querySelectorAll('.reserve_main_table td')[2].innerText +
                       ' ' +
                       document.querySelectorAll('.reserve_main_table td')[3].innerText;
            });

            var loc = page.evaluate(function () {
                return document.querySelectorAll('.reserve_main_table td')[4].innerText;
            });
            console.log([user, loc, time, count].join('\t'));
        }
        page.close();

        if (callback) {
            callback();
        }
    });
}

function process() {
    phantom.addCookie({
        'name':     'SESS0503627fa9caee1704074bff31525611',
        'value':    '2521fe797adf8ef2f485fc57a8ec11f4',
        'domain':   '.flywheelsports.com'
    });

    if (users.length > 0) {
        var user = users.pop();
        follow(user, process);
    } else {
        phantom.exit();
    }
}

process();
